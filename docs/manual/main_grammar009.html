<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.09">
<link rel="stylesheet" type="text/css" href="main_grammar.css">
<title>Expressions</title>
</head>
<body >
<a href="main_grammar008.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="main_grammar010.html"><img src="next_motif.gif" alt="Next"></a>
<hr>
<h2 id="sec10" class="section">9  Expressions</h2>
<p>A nest or a single ellipsis is allowed in some expression contexts, and
causes ambiguity in others. For example, in a sequence <span style="font-family:monospace">…</span><span style="font-family:monospace"><span style="font-style:italic">expr</span></span><span style="font-family:monospace"> …</span>, the nonterminal <span style="font-style:italic">expr</span> must be instantiated as an
explicit C-language expression, while in an array reference,
<span style="font-style:italic">expr</span><sub>1</sub><span style="font-family:monospace"> </span><span style="font-family:monospace">[</span><span style="font-family:monospace"> </span><span style="font-style:italic">expr</span><sub>2</sub><span style="font-family:monospace"> </span><span style="font-family:monospace">]</span>, the
nonterminal <span style="font-style:italic">expr</span><sub>2</sub>, because it is delimited by brackets, can
be also instantiated as <span style="font-family:monospace">…</span>, representing an arbitrary expression. To
distinguish between the various possibilities, we define three nonterminals
for expressions: <em>expr</em> does not allow either top-level nests or
ellipses, <em>nest_expr</em> allows a nest but not an ellipsis, and <em>dot_expr</em> allows both. The EXPR macro is used to express these variants
in a concise way.</p><div class="center"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="text-align:left;white-space:nowrap" > <a id="expr"><span style="color:maroon">expr</span></a><span style="color:maroon">
</span></td><td style="text-align:center;white-space:nowrap" ><span style="color:black">  ::=  </span></td><td style="text-align:left;white-space:nowrap" ><a href="#EXPR"><span style="color:maroon">EXPR</span></a><span style="color:blue">(</span><a href="#expr"><span style="color:maroon">expr</span></a><span style="color:blue">)</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >
<a id="nest_expr"><span style="color:maroon">nest_expr</span></a><span style="color:maroon">
</span></td><td style="text-align:center;white-space:nowrap" ><span style="color:black">  ::=  </span></td><td style="text-align:left;white-space:nowrap" ><a href="#EXPR"><span style="color:maroon">EXPR</span></a><span style="color:blue">(</span><a href="#nest_expr"><span style="color:maroon">nest_expr</span></a><span style="color:blue">)</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="main_grammar008.html#NEST"><span style="color:maroon">NEST</span></a><span style="color:blue">(</span><a href="#nest_expr"><span style="color:maroon">nest_expr</span></a><span style="color:blue">, </span><a href="#exp_whencode"><span style="color:maroon">exp_whencode</span></a><span style="color:blue">)</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >
<a id="dot_expr"><span style="color:maroon">dot_expr</span></a><span style="color:maroon">
</span></td><td style="text-align:center;white-space:nowrap" ><span style="color:black">  ::=  </span></td><td style="text-align:left;white-space:nowrap" ><a href="#EXPR"><span style="color:maroon">EXPR</span></a><span style="color:blue">(</span><a href="#dot_expr"><span style="color:maroon">dot_expr</span></a><span style="color:blue">)</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="main_grammar008.html#NEST"><span style="color:maroon">NEST</span></a><span style="color:blue">(</span><a href="#dot_expr"><span style="color:maroon">dot_expr</span></a><span style="color:blue">, </span><a href="#exp_whencode"><span style="color:maroon">exp_whencode</span></a><span style="color:blue">)</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">... </span><span style="color:black">[</span><a href="#exp_whencode"><span style="color:maroon">exp_whencode</span></a><span style="color:black">]</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >
<a id="EXPR"><span style="color:maroon">EXPR</span></a><span style="color:maroon">(</span><a id="exp"><span style="color:maroon">exp</span></a><span style="color:maroon">)</span><span style="color:maroon">
</span></td><td style="text-align:center;white-space:nowrap" ><span style="color:black">  ::=  </span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue"> </span><a href="#assign_op"><span style="color:maroon">assign_op</span></a><span style="color:blue"> </span><a href="#exp"><span style="color:maroon">exp</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue"> </span><span style="color:blue"><span style="font-family:sans-serif"><span style="font-style:italic">metaid</span></span></span><sup><span style="color:blue"><span style="font-size:small"><span style="font-family:sans-serif">AssignOp</span></span></span></sup><span style="color:blue"> </span><a href="#exp"><span style="color:maroon">exp</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue">++</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue">–</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#unary_op"><span style="color:maroon">unary_op</span></a><span style="color:blue"> </span><a href="#exp"><span style="color:maroon">exp</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue"> </span><a href="#bin_op"><span style="color:maroon">bin_op</span></a><span style="color:blue"> </span><a href="#exp"><span style="color:maroon">exp</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue"> </span><span style="color:blue"><span style="font-family:sans-serif"><span style="font-style:italic">metaid</span></span></span><sup><span style="color:blue"><span style="font-size:small"><span style="font-family:sans-serif">BinOp</span></span></span></sup><span style="color:blue"> </span><a href="#exp"><span style="color:maroon">exp</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue"> ? </span><a href="#dot_expr"><span style="color:maroon">dot_expr</span></a><span style="color:blue"> : </span><a href="#exp"><span style="color:maroon">exp</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">(</span><a href="main_grammar010.html#type"><span style="color:maroon">type</span></a><span style="color:blue">) </span><a href="#exp"><span style="color:maroon">exp</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue"> [</span><a href="#dot_expr"><span style="color:maroon">dot_expr</span></a><span style="color:blue">]</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue"> . </span><a href="main_grammar010.html#id"><span style="color:maroon">id</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue"> -&gt; </span><a href="main_grammar010.html#id"><span style="color:maroon">id</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue">(</span><span style="color:black">[</span><a href="main_grammar006.html#PARAMSEQ"><span style="color:maroon">PARAMSEQ</span></a><span style="color:blue">(</span><a href="#arg"><span style="color:maroon">arg</span></a><span style="color:blue">, </span><a href="#exp_whencode"><span style="color:maroon">exp_whencode</span></a><span style="color:blue">)</span><span style="color:black">]</span><span style="color:blue">)</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="main_grammar010.html#id"><span style="color:maroon">id</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">(</span><a href="main_grammar010.html#type"><span style="color:maroon">type</span></a><span style="color:blue">) </span><span style="color:blue"><span style="font-family:monospace">{</span></span><span style="color:blue"> </span><a href="main_grammar002.html#COMMA_LIST"><span style="color:maroon">COMMA_LIST</span></a><span style="color:blue">(</span><a href="main_grammar007.html#init_list_elem"><span style="color:maroon">init_list_elem</span></a><span style="color:blue">)</span><span style="color:blue"> </span><span style="color:blue"><span style="font-family:monospace">}</span></span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue"><span style="font-family:sans-serif"><span style="font-style:italic">metaid</span></span></span><sup><span style="color:blue"><span style="font-size:small"><span style="font-family:sans-serif">Exp</span></span></span></sup> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue"><span style="font-family:sans-serif"><span style="font-style:italic">metaid</span></span></span><sup><span style="color:blue"><span style="font-size:small"><span style="font-family:sans-serif">Const</span></span></span></sup> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="main_grammar010.html#const"><span style="color:maroon">const</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">(</span><a href="#dot_expr"><span style="color:maroon">dot_expr</span></a><span style="color:blue">)</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><a href="main_grammar008.html#OR"><span style="color:maroon">OR</span></a><span style="color:blue">(</span><a href="#exp"><span style="color:maroon">exp</span></a><span style="color:blue">)</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >
<a id="arg"><span style="color:maroon">arg</span></a><span style="color:maroon">
</span></td><td style="text-align:center;white-space:nowrap" ><span style="color:black">  ::=  </span></td><td style="text-align:left;white-space:nowrap" ><a href="#nest_expr"><span style="color:maroon">nest_expr</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue"><span style="font-family:sans-serif"><span style="font-style:italic">metaid</span></span></span><sup><span style="color:blue"><span style="font-size:small"><span style="font-family:sans-serif">ExpList</span></span></span></sup> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >
<a id="exp_whencode"><span style="color:maroon">exp_whencode</span></a><span style="color:maroon">
</span></td><td style="text-align:center;white-space:nowrap" ><span style="color:black">  ::=  </span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">when != </span><a href="#expr"><span style="color:maroon">expr</span></a> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >
<a id="assign_op"><span style="color:maroon">assign_op</span></a><span style="color:maroon">
</span></td><td style="text-align:center;white-space:nowrap" ><span style="color:black">  ::=  </span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">= </span><span style="color:black">|</span><span style="color:blue"> -= </span><span style="color:black">|</span><span style="color:blue"> += </span><span style="color:black">|</span><span style="color:blue"> *= </span><span style="color:black">|</span><span style="color:blue"> /= </span><span style="color:black">|</span><span style="color:blue"> %=</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">&amp;= </span><span style="color:black">|</span><span style="color:blue"> |= </span><span style="color:black">|</span><span style="color:blue"> <span style="font-family:monospace">^= </span></span><span style="color:black">|</span><span style="color:blue"><span style="font-family:monospace"> &lt;&lt;= </span></span><span style="color:black">|</span><span style="color:blue"><span style="font-family:monospace"> &gt;&gt;=</span></span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >
<a id="bin_op"><span style="color:maroon">bin_op</span></a><span style="color:maroon">
</span></td><td style="text-align:center;white-space:nowrap" ><span style="color:black">  ::=  </span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">* </span><span style="color:black">|</span><span style="color:blue"> / </span><span style="color:black">|</span><span style="color:blue"> % </span><span style="color:black">|</span><span style="color:blue"> + </span><span style="color:black">|</span><span style="color:blue"> -</span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue"><span style="font-family:monospace">&lt;&lt;</span></span><span style="color:black">|</span><span style="color:blue"><span style="font-family:monospace"> &gt;&gt;</span></span><span style="color:black">|</span><span style="color:blue"><span style="font-family:monospace"> ^ </span></span><span style="color:black">|</span><span style="color:blue"><span style="font-family:monospace"> &amp; </span></span><span style="color:black">|</span><span style="color:blue"><span style="font-family:monospace"> </span></span><span style="color:blue"><span style="font-family:monospace">|</span></span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" > </td><td style="text-align:center;white-space:nowrap" ><span style="color:black">|</span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">&lt; </span><span style="color:black">|</span><span style="color:blue"> &gt; </span><span style="color:black">|</span><span style="color:blue"> &lt;= </span><span style="color:black">|</span><span style="color:blue"> &gt;= </span><span style="color:black">|</span><span style="color:blue"> == </span><span style="color:black">|</span><span style="color:blue"> != </span><span style="color:black">|</span><span style="color:blue"> &amp;&amp; </span><span style="color:black">|</span><span style="color:blue"> </span><span style="color:blue"><span style="font-family:monospace">|</span></span><span style="color:blue"><span style="font-family:monospace">|</span></span> </td></tr>
<tr><td style="text-align:left;white-space:nowrap" >
<a id="unary_op"><span style="color:maroon">unary_op</span></a><span style="color:maroon">
</span></td><td style="text-align:center;white-space:nowrap" ><span style="color:black">  ::=  </span></td><td style="text-align:left;white-space:nowrap" ><span style="color:blue">++ </span><span style="color:black">|</span><span style="color:blue"> – </span><span style="color:black">|</span><span style="color:blue"> &amp; </span><span style="color:black">|</span><span style="color:blue"> * </span><span style="color:black">|</span><span style="color:blue"> + </span><span style="color:black">|</span><span style="color:blue"> - </span><span style="color:black">|</span><span style="color:blue"> !</span> </td></tr>
</table></div>
<hr>
<a href="main_grammar008.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="main_grammar010.html"><img src="next_motif.gif" alt="Next"></a>
</body>
</html>
