<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.06">
<link rel="stylesheet" type="text/css" href="main_grammar.css">
<title>Command-line semantic match</title>
</head>
<body >
<a href="main_grammar011.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="main_grammar013.html"><img src="next_motif.gif" alt="Next"></a>
<hr>
<h2 id="sec13" class="section">12  Command-line semantic match</h2>
<p>It is possible to specify a semantic match on the spatch command line,
using the argument <span style="font-family:monospace">-sp</span>. In such a semantic match, any token
beginning with a capital letter is assumed to be a metavariable of type
<span style="font-family:monospace">metavariable</span>. In this case, the parser must be able to figure out what
kind of metavariable it is. It is also possible to specify the type of a
metavariable by enclosing the type in :’s, concatenated directly to the
metavariable name.</p><p>Some examples of semantic matches that can be given as an argument to <span style="font-family:monospace">-sp</span> are as follows:</p><ul class="itemize"><li class="li-itemize">
<span style="font-family:monospace">f(e)</span>: This only matches the expression <span style="font-family:monospace">f(e)</span>.
</li><li class="li-itemize"><span style="font-family:monospace">f(E)</span>: This matches a call to f with any argument.
</li><li class="li-itemize"><span style="font-family:monospace">F(E)</span>: This gives a parse error; the semantic patch parser
cannot figure out what kind of metavariable <span style="font-family:monospace">F</span> is.
</li><li class="li-itemize"><span style="font-family:monospace">F:identifier:(E)</span>: This matches any one argument function
call.
</li><li class="li-itemize"><span style="font-family:monospace">f:identifier:(e:struct foo *:)</span>: This matches any one
argument function call where the argument has type <span style="font-family:monospace">struct foo
*</span>. Since the types of the metavariables are specified, it is not
necessary for the metavariable names to begin with a capital letter.
</li><li class="li-itemize"><span style="font-family:monospace">F:identifier:(F)</span>: This matches any one argument function call
where the argument is the name of the function itself. This example
shows that it is not necessary to repeat the metavariable type name.
</li><li class="li-itemize"><span style="font-family:monospace">F:identifier:(F:identifier:)</span>: This matches any one argument
function call
where the argument is the name of the function itself. This example
shows that it is possible to repeat the metavariable type name.
</li></ul><p><span style="font-family:monospace">When</span> constraints, <span style="font-style:italic">e.g.</span> <span style="font-family:monospace">when != e</span>, are allowed
but the expression <span style="font-family:monospace">e</span> must be represented as a single token.</p><p>The generated semantic match behaves as though there were a <span style="font-family:monospace">*</span> in front
of every token.</p>
<hr>
<a href="main_grammar011.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="main_grammar013.html"><img src="next_motif.gif" alt="Next"></a>
</body>
</html>
